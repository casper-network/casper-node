[workspace]
members = [
    "ci/casper_updater",
    "client",
    "execution_engine",
    "execution_engine_testing",
    "execution_engine_testing/cargo_casper",
    "hashing",
    "node",
    "smart_contracts/contract",
    "smart_contracts/contracts/[!.]*/*",
    "types",
    "utils/dry-run-deploys",
    "utils/global-state-update-gen",
    "utils/retrieve-state",
    "utils/validation",
]

default-members = [
    "ci/casper_updater",
    "client",
    "execution_engine",
    "execution_engine_testing",
    "execution_engine_testing/cargo_casper",
    "hashing",
    "node",
    "types",
    "utils/dry-run-deploys",
    "utils/global-state-update-gen",
    "utils/retrieve-state",
    "utils/validation",
]

# Include debug symbols in the release build of `casper-engine-tests` so that `simple-transfer` will yield useful
# perf data.
[profile.release.package.casper-engine-tests]
debug = true

[profile.release]
codegen-units = 1
lto = true

[profile.bench]
codegen-units = 1
lto = true

# This section is required by any of the crates in this workspace which depend upon `casper-engine-test-support`.  It
# causes `casper-engine-test-support` to depend upon these local copies of the three `casper-` crates rather than the
# published ones, and hence avoids a compiler error where two versions of the same crate are consumed in a single crate.
[patch.crates-io]
casper-execution-engine = { path = "execution_engine" }
casper-hashing = { path = "hashing" }
casper-types = { path = "types" }
